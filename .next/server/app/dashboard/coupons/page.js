(()=>{var e={};e.id=762,e.ids=[762],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2624:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>u,pages:()=>o,routeModule:()=>p,tree:()=>d}),s(871),s(1216),s(5866);var a=s(3191),r=s(8716),i=s(7922),l=s.n(i),n=s(5231),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);s.d(t,c);let d=["",{children:["dashboard",{children:["coupons",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,871)),"/Users/vishnu/Documents/fashion_admin_dashboard/app/app/dashboard/coupons/page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,1216)),"/Users/vishnu/Documents/fashion_admin_dashboard/app/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,5866,23)),"next/dist/client/components/not-found-error"]}],o=["/Users/vishnu/Documents/fashion_admin_dashboard/app/app/dashboard/coupons/page.tsx"],u="/dashboard/coupons/page",x={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/dashboard/coupons/page",pathname:"/dashboard/coupons",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},5334:(e,t,s)=>{Promise.resolve().then(s.bind(s,8704))},8704:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>M});var a=s(326),r=s(7577),i=s(4723),l=s(1774),n=s(123),c=s(2183),d=s(2714),o=s(2235),u=s(7083),x=s(1479),p=s(3855),m=s(5276),h=s(2881);let y=(0,h.Z)("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var g=s(7358),j=s(9508);let f=(0,h.Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),v=(0,h.Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]);var b=s(8091);let N=(0,h.Z)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),w=(0,h.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);var k=s(1821);let C=n.Ry({code:n.Z_().required("Coupon code is required").min(3,"Code must be at least 3 characters"),discountType:n.Z_().required("Discount type is required"),discountValue:n.Rx().min(0,"Discount value must be positive").required("Discount value is required"),startDate:n.Z_().required("Start date is required"),expiryDate:n.Z_().required("Expiry date is required"),minOrderValue:n.Rx().min(0,"Minimum order value must be non-negative"),maxUsageCount:n.Rx().min(1,"Max usage count must be at least 1").required("Max usage count is required")}),D=[{value:"flat",label:"Flat Amount (₹)"},{value:"percentage",label:"Percentage (%)"}];function M(){let[e,t]=(0,r.useState)([]),[s,n]=(0,r.useState)([]),[h,M]=(0,r.useState)(!0),[S,U]=(0,r.useState)(!1),[_,Z]=(0,r.useState)(!1),[q,A]=(0,r.useState)(null),[P,T]=(0,r.useState)(""),[V,E]=(0,r.useState)(!1),{addToast:O}=(0,u.p)(),{register:$,handleSubmit:L,formState:{errors:R},reset:F,setValue:G,watch:I}=(0,i.cI)({resolver:(0,l.X)(C)}),z=I("discountType"),H=async()=>{try{let[e,s]=await Promise.all([o.M.getCoupons(),o.M.getCouponUsages()]);t(e),n(s)}catch(e){O({title:"Error",description:"Failed to load coupon data",type:"error"})}finally{M(!1)}},X=e=>{G("code",e.code),G("discountType",e.discountType),G("discountValue",e.discountValue),G("startDate",new Date(e.startDate).toISOString().split("T")[0]),G("expiryDate",new Date(e.expiryDate).toISOString().split("T")[0]),G("minOrderValue",e.minOrderValue||0),G("maxUsageCount",e.maxUsageCount),A(e),U(!0)},W=async e=>{E(!0);try{let t={...e,startDate:new Date(e.startDate),expiryDate:new Date(e.expiryDate),currentUsage:q?.currentUsage||0,isActive:q?.isActive??!0};q?(await o.M.updateCoupon(q.id,t),O({title:"Success",description:"Coupon updated successfully",type:"success"})):(await o.M.createCoupon(t),O({title:"Success",description:"Coupon created successfully",type:"success"})),await H(),U(!1),F(),A(null)}catch(e){O({title:"Error",description:"Failed to save coupon",type:"error"})}finally{E(!1)}},B=async e=>{try{await o.M.updateCoupon(e.id,{isActive:!e.isActive}),O({title:"Success",description:`Coupon ${e.isActive?"deactivated":"activated"} successfully`,type:"success"}),await H()}catch(e){O({title:"Error",description:"Failed to update coupon status",type:"error"})}},J=async e=>{if(confirm(`Are you sure you want to delete coupon ${e.code}?`))try{await o.M.deleteCoupon(e.id),O({title:"Success",description:"Coupon deleted successfully",type:"success"}),await H()}catch(e){O({title:"Error",description:"Failed to delete coupon",type:"error"})}},K=e=>{T(e),Z(!0)},Q=e=>e.isActive?new Date>new Date(e.expiryDate)?"bg-red-100 text-red-800":e.currentUsage>=e.maxUsageCount?"bg-orange-100 text-orange-800":"bg-green-100 text-green-800":"bg-gray-100 text-gray-800",Y=e=>e.isActive?new Date>new Date(e.expiryDate)?"Expired":e.currentUsage>=e.maxUsageCount?"Fully Used":"Active":"Inactive",ee=s.filter(e=>e.couponCode===P);return h?a.jsx(d.i,{children:a.jsx(c.c,{currentPage:"/dashboard/coupons",children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})}):a.jsx(d.i,{children:a.jsx(c.c,{currentPage:"/dashboard/coupons",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Coupon Management"}),(0,a.jsxs)("button",{onClick:()=>{F(),A(null),U(!0)},className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[a.jsx(p.Z,{className:"h-4 w-4 mr-2"}),"Create Coupon"]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border",children:a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Coupon Code"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usage"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Validity"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(m.Z,{className:"h-4 w-4 text-purple-500 mr-2"}),(0,a.jsxs)("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.code}),e.minOrderValue&&(0,a.jsxs)("div",{className:"text-xs text-gray-500",children:["Min: ₹",e.minOrderValue]})]})]})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:"flat"===e.discountType?`₹${e.discountValue}`:`${e.discountValue}%`}),a.jsx("div",{className:"text-xs text-gray-500 capitalize",children:e.discountType})]}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-900",children:[e.currentUsage," / ",e.maxUsageCount]}),a.jsx("button",{onClick:()=>K(e.code),className:"ml-2 text-blue-600 hover:text-blue-800",children:a.jsx(y,{className:"h-4 w-4"})})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:a.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${e.currentUsage/e.maxUsageCount*100}%`}})})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(g.Z,{className:"h-4 w-4 mr-1"}),(0,a.jsxs)("div",{children:[a.jsx("div",{children:new Date(e.startDate).toLocaleDateString()}),(0,a.jsxs)("div",{children:["to ",new Date(e.expiryDate).toLocaleDateString()]})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${Q(e)}`,children:Y(e)})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>X(e),className:"text-blue-600 hover:text-blue-800",children:a.jsx(j.Z,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>B(e),className:`${e.isActive?"text-green-600 hover:text-green-800":"text-gray-400 hover:text-gray-600"}`,children:e.isActive?a.jsx(f,{className:"h-5 w-5"}):a.jsx(v,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>J(e),className:"text-red-600 hover:text-red-800",children:a.jsx(b.Z,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),a.jsx(x.u,{isOpen:S,onClose:()=>U(!1),title:q?"Edit Coupon":"Create New Coupon",className:"max-w-lg",children:(0,a.jsxs)("form",{onSubmit:L(W),className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Coupon Code *"}),a.jsx("input",{...$("code"),type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"e.g., WELCOME10",style:{textTransform:"uppercase"}}),R.code&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:R.code.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Type *"}),(0,a.jsxs)("select",{...$("discountType"),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",children:[a.jsx("option",{value:"",children:"Select Discount Type"}),D.map(e=>a.jsx("option",{value:e.value,children:e.label},e.value))]}),R.discountType&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:R.discountType.message})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Discount Value * ","percentage"===z?"(%)":"(₹)"]}),a.jsx("input",{...$("discountValue"),type:"number",min:"0",step:"percentage"===z?"1":"0.01",max:"percentage"===z?"100":void 0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"0"}),R.discountValue&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:R.discountValue.message})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date *"}),a.jsx("input",{...$("startDate"),type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),R.startDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:R.startDate.message})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Expiry Date *"}),a.jsx("input",{...$("expiryDate"),type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"}),R.expiryDate&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:R.expiryDate.message})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Min Order Value (₹)"}),a.jsx("input",{...$("minOrderValue"),type:"number",min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"0"})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Usage Count *"}),a.jsx("input",{...$("maxUsageCount"),type:"number",min:"1",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",placeholder:"100"}),R.maxUsageCount&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:R.maxUsageCount.message})]})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[a.jsx("button",{type:"button",onClick:()=>U(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancel"}),a.jsx("button",{type:"submit",disabled:V,className:"px-4 py-2 text-sm font-medium text-white bg-purple-600 rounded-md hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:V?"Saving...":q?"Update Coupon":"Create Coupon"})]})]})}),a.jsx(x.u,{isOpen:_,onClose:()=>Z(!1),title:`Usage Report: ${P}`,className:"max-w-2xl",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(N,{className:"h-5 w-5 text-purple-600 mr-2"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-purple-800",children:["Total Usage: ",ee.length," times"]})]}),(0,a.jsxs)("div",{className:"text-sm text-purple-600",children:["Total Saved: ₹",ee.reduce((e,t)=>e+.1*t.orderAmount,0).toLocaleString()]})]}),ee.length>0?a.jsx("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full",children:[a.jsx("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Customer"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Order Amount"}),a.jsx("th",{className:"px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase",children:"Used Date"})]})}),a.jsx("tbody",{className:"divide-y divide-gray-200",children:ee.map(e=>(0,a.jsxs)("tr",{children:[a.jsx("td",{className:"px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(w,{className:"h-4 w-4 text-gray-400 mr-2"}),a.jsx("span",{className:"text-sm text-gray-900",children:e.customerName})]})}),a.jsx("td",{className:"px-4 py-2",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(k.Z,{className:"h-4 w-4 text-gray-400 mr-1"}),(0,a.jsxs)("span",{className:"text-sm text-gray-900",children:["₹",e.orderAmount.toLocaleString()]})]})}),a.jsx("td",{className:"px-4 py-2",children:a.jsx("span",{className:"text-sm text-gray-500",children:new Date(e.usedAt).toLocaleDateString()})})]},e.id))})]})}):(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(w,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"No usage data found for this coupon."})]})]})})]})})})}},7358:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},3855:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},9508:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},8091:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});let a=(0,s(2881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},871:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>a});let a=(0,s(8570).createProxy)(String.raw`/Users/vishnu/Documents/fashion_admin_dashboard/app/app/dashboard/coupons/page.tsx#default`)}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),a=t.X(0,[693,280,452],()=>s(2624));module.exports=a})();